<div class="row">
    <div class="col">
        <a class="btn btn-dark m-1" onclick="back()"><i class="fa-solid fa-arrow-left"></i></a>
        <input type="text" class="form-control" id="path">
        <button onclick="pathcmd()" class="btn btn-primary" >execute</button>

    </div>


  
</div>
<hr>

<div class=" row ">


<style>
    .folder{
        cursor: pointer;
    }
</style>
<ul  style="max-height: 60vh; overflow-y: auto;">
<% folder.forEach(element => { %>


  

        <li style="list-style: none;">
            <div class="row m-2 border p-2">    
                <div class="col d-flex ">
                    <h6 class="m-0 fw-bold text-dark folder" data-foldername="<%= element %>" onclick="cd(this)" ><%= element %></h6>
                    <i class="fa-solid fa-trash btn-dark btn p-2 ms-auto"  onclick="deleteapp(this)" style="font-size: 0.8rem;" data-folder="<%= element %>"></i>
                </div>

            </div>

        </li>
  

    
<% }) %>
</ul>
<hr>
<div id="output" class="output-terminal mb-3 rounded-2" style="max-height: 60vh; overflow-y: auto;">
  ðŸ¤  Log things here...
</div>
</div>  







<form  style="display: none;" class="mb-4">

    <div class="mb-3">
        <label for="command" class="form-label">Command:</label>

        <textarea class="form-control text-light" name="dir" id="dir" cols="30" rows="10" style="background-color: black;" ></textarea>
    </div>
    <button class="btn btn-light btn-sm mt-2" type="submit"  hx-post="/changedir" hx-trigger="click" id="dirbtn" hx-target="#home">Execute Command</button>

</form>



<script>


    
    function deleteapp(button) {
        const folder = button.getAttribute('data-folder');
        document.getElementById('dir').value = `rm -r ${path}${folder} && cd ${path} && ls -a`;
        document.getElementById('dirbtn').click();

     
    }

    function cd(button) {
        const foldername = button.getAttribute('data-foldername');
        console.log(foldername);
        document.getElementById('dir').value = `cd ${path}${foldername}/ && ls -a`;
        path += `${foldername}/`;

        console.log(path);
        document.getElementById('dirbtn').click();
        document.getElementById('path').value = path
    }

    function back() {
        const pathParts = path.split('/');
       
        
        if (pathParts.length > 2) {
            path = pathParts.slice(0, -2).join('/') + '/';
        } else {
            path = '/';
        }
        document.getElementById('dir').value = `cd ${path} && ls -a`;
        console.log(path , back);
        document.getElementById('dirbtn').click();

    }
    function pathcmd() {
        
   
        const cmd = document.getElementById('path').value
        console.log(`cd ${path} && ${cmd}`);
        
        document.getElementById('command').value = `cd ${path} && ${cmd}`;
       
        document.getElementById('exe').click();

    }

</script>

